<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TrackForge | PO Detail</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --primary: #2c3e50; --accent: #3498db; --bg: #f4f7f6; --success: #27ae60; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); padding: 40px; margin: 0; }
        .container { max-width: 1000px; margin: 0 auto; background: white; padding: 40px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .header { border-bottom: 2px solid #eee; padding-bottom: 25px; margin-bottom: 30px; display: flex; justify-content: space-between; align-items: center; }
        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 40px; }
        .card { background: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid var(--accent); }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { text-align: left; background: #f1f2f6; padding: 15px; border-bottom: 2px solid #ddd; font-size: 12px; text-transform: uppercase; color: #7f8c8d; }
        td { padding: 15px; border-bottom: 1px solid #eee; font-size: 14px; color: #333; }
        .status-badge { padding: 8px 16px; border-radius: 50px; background: var(--primary); color: white; font-weight: bold; font-size: 12px; }
        .grand-total-row { background: #fdfdfd; font-size: 18px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 style="margin:0">Order #{{ order.reference_number }}</h1>
            <span class="status-badge">{{ order.get_status_display }}</span>
        </div>

        <div class="info-grid">
            <div class="card">
                <h4 style="margin-top:0"><i class="fas fa-truck"></i> Supplier Info</h4>
                <strong>{{ order.supplier.name }}</strong><br>
                <small>{{ order.supplier.email }}</small>
            </div>
            <div class="card" style="border-color: var(--primary)">
                <h4 style="margin-top:0"><i class="fas fa-warehouse"></i> Delivery Location</h4>
                <strong>{{ order.warehouse.name }}</strong><br>
                <code>Code: {{ order.warehouse.code }}</code>
            </div>
        </div>

        <h3>Order Items</h3>
        <table>
            <thead>
                <tr>
                    <th>Product Description</th>
                    <th style="text-align: center;">Quantity</th>
                    <th>Unit Price</th>
                    <th style="text-align: right;">Line Total</th>
                </tr>
            </thead>
            <tbody>
                {% for item in items %}
                <tr>
                    <td><strong>{{ item.product.name }}</strong></td>
                    <td style="text-align: center;">{{ item.quantity }}</td>
                    <td>${{ item.unit_price }}</td>
                    <td style="text-align: right;"><strong>${{ item.line_total }}</strong></td>
                </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr class="grand-total-row">
                    <td colspan="3" style="text-align: right; padding-top: 25px;">Grand Total:</td>
                    <td style="text-align: right; padding-top: 25px; color: var(--success);">${{ grand_total }}</td>
                </tr>
            </tfoot>
        </table>

        <div style="margin-top: 50px; border-top: 1px solid #eee; padding-top: 20px; display: flex; justify-content: space-between;">
            <a href="{% url 'purchaseorder_list' %}" style="color: #7f8c8d; text-decoration: none;"><i class="fas fa-arrow-left"></i> Back to List</a>

            {% if order.status != 'completed' %}
            <button style="background: var(--success); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: bold;">
                <i class="fas fa-check-double"></i> Receive Order
            </button>
            {% endif %}
        </div>
    </div>
</body>
</html>